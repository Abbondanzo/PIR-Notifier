# PIR Notifier

I wrote this simple Node app to send push notifications directly to Telegram. All you need is a [PIR motion sensor](https://www.osepp.com/electronic-modules/sensor-modules/73-passive-infrared-sensor-pir-module) and a good Raspberry Pi or Arduino to host this app. It will send your customized message to a Telegram bot. Since I've imported all of the [Node.js Telegram Bot API](https://github.com/yagop/node-telegram-bot-api), you can customize how your bot interacts with this information.

## Installation

Run `npm install`. While that's installing, rename your `.envexample` file to just `.env`. Those two tokens will be read automatically, so you can generate them by visting [here](https://core.telegram.org/bots#3-how-do-i-create-a-bot). You've also got a handful of other customizations:

| Config Name             | Value Type | Description                                                                                                                                                                                                                           |
| ----------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `sensorPin`             | Integer    | Here's where you put the digital input GPIO pin number. Do not put the pin number, that is the wrong number! See [this diagram](https://i.stack.imgur.com/KL4PZ.png) for help. For example, pin #11 is GPIO #17, so I would use `17`. |
| `motionDetected`        | Integer    | You can leave this number at `1` for the signal received from `onoff` if there is motion. If you want to detect lack of motion, change it to `0`.                                                                                     |
| `minimumMotionDuration` | Integer    | Specify the number of seconds you want the motion to be before triggering message sending to Telegram. If you set this to `0`, messages will be sent automatically if there is no timeout.                                            |
| `timeout`               | Integer    | The minimum number of seconds between each message sent to Telegram.                                                                                                                                                                  |
| `message`               | String     | The message you want send by your bot when motion is detected.                                                                                                                                                                        |
| `chatId`                | String     | If you wish to change this, edit your `.env` file. This indicates the chat ID your bot will be sending the message to.                                                                                                                |
| `botToken`              | String     | If you wish to change this, edit your `.env` file. The API token generated by your bot.                                                                                                                                               |

## Usage

Run `npm start`. Cool!

## Documentation

There is none! You can visit [this repository](https://github.com/yagop/node-telegram-bot-api) for how to send custom messages through Telegram and you can visit [this repository](https://github.com/fivdi/onoff) for help with GPIO pins.
